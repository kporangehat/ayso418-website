{% load wagtailcore_tags section_nav_tags %}

{% if value.layout == 'full_width' %}
    <!-- Full Width Layout -->
    <div class="prose max-w-none">
        {% for block in value.content %}
            {% include_block block %}
        {% endfor %}
    </div>

{% elif value.layout == 'sidebar' %}
    <!-- Content with Right Sidebar Layout -->
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
        <!-- Main Content (75% on large screens) -->
        <div class="lg:col-span-3">
            <div class="prose max-w-4xl">
                {% for block in value.content %}
                    {% include_block block %}
                {% endfor %}
            </div>
        </div>

        <!-- Sidebar (25% on large screens) -->
        <aside class="lg:col-span-1 space-y-6" aria-label="Sidebar content">
            <!-- Section Navigation - Show if enabled and page is within a section -->
            {% get_section_nav page as section_nav %}
            {% if value.show_resources_nav and section_nav.section_index %}
                {% include "blocks/resources_navigation_block.html" with category_page=section_nav.category_page sibling_pages=section_nav.sibling_pages current_page=section_nav.current_page %}
            {% endif %}

            <!-- Custom Sidebar Blocks -->
            {% for block in value.sidebar %}
                {% include_block block %}
            {% endfor %}
        </aside>
    </div>

{% endif %}
